
trait HasType
  type t
end

mod Foo { A : HasType }
  mod Bar { B : HasType }
    fun my-swap ( A.t B.t -- B.t A.t )
      Prelude.swap
    end
  end
end

# Issue #8
mod L
  mod HasInt mod t = Int end end
end

mod M
  mod MyFoo = Foo { L.HasInt } end
end

mod N
  mod MyBar = M.MyFoo.Bar { L.HasInt } end
end

# TODO Definitely some awkwardness if we make M and N one module.
# Alias resolution still doesn't understand the modules that haven't
# been loaded yet.

fun test ( -- Bool )
  100 200 N.MyBar.my-swap 100 = swap 200 = and
end
