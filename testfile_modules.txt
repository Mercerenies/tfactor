
trait KnowsTheAnswer
  val the-answer ( -- Int )
end

mod Container
  alias AAA = A
  mod Foo = AAA end
end

mod A
  require KnowsTheAnswer

  fun the-answer ( -- Int )
    42
  end

end

mod B = A end

alias Con = Container

# Should produce a cyclic load error
# mod C = D end
# mod D = C end

# Should produce failed trait requirement
# mod E require KnowsTheAnswer end
# mod F require KnowsTheAnswer fun the-answer ( -- String ) "A" end end

mod KindaKnowsTheAnswer
  require KnowsTheAnswer

  # This is still technically fine, though silly
  fun the-answer ( -- Nothing )
    42 Primitives.unsafe1
  end

end

trait HasInnerModule

  mod Inner
    val foo ( 'a -- 'a )
  end

end

mod OuterModule
  require HasInnerModule

  mod Inner
    fun foo ( 'a -- 'a ) id end
  end

end

fun main ( -- Int )
  Con.Foo.the-answer
end
